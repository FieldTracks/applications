<VirtualHost *:80>
	DocumentRoot /var/www/html/
    Include /data/etc/apache2/fieldtracks.conf

	ErrorLog /data/log/apache2/error.log
	CustomLog /data/log/apache2/access.log combined

	# Needed by MQTT / mosquitto for authencating users.
	# Not exposed to TLS, because this is a localhost thing.
    Alias /api /var/www/html/api.json
    <Location /api>
        AllowOverride None
        AuthType jwt
        AuthName "Fieldtracks API"
        Require valid-user
    </Location>


</VirtualHost>

<VirtualHost *:443>
	DocumentRoot /var/www/html/
    Include /data/etc/apache2/fieldtracks.conf

    SSLEngine on
    SSLCertificateFile "/data/etc/tls/web.crt"
    SSLCertificateKeyFile "/data/etc/tls/web.key"
    SSLCACertificateFile "/data/etc/tls/web.ca.crt"

	ErrorLog /data/log/apache2/error_tls.log
	CustomLog /data/log/apache2/access_tls.log combined
</VirtualHost>
